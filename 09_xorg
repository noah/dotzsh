# poor man's display manager
#
if [[ -z "$DISPLAY" ]] && [[ $(tty) = /dev/tty1 ]]; then
  # ~/.xinitrc decides which wm to use
  exec startx > ~/logs/startx.log 2>&1
else
  # don't start keychain if logging in from tty
  [[ -f ~/.ssh/id_rsa ]]            && /usr/bin/keychain --timeout 999999 --nogui ~/.ssh/id_rsa
  [[ -f ~/.keychain/$HOST-sh ]]     && . ~/.keychain/$HOST-sh
  # [[ -f ~/.keychain/$HOST-sh-gpg ]] && . ~/.keychain/$HOST-sh-gpg
fi

# vim: ft=zsh
