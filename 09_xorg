# poor man's display manager
#
if [[ -z "$DISPLAY" ]] && [[ $(tty) = /dev/tty1 ]]; then
  # ~/.xinitrc decides which wm to use
  exec startx > ~/logs/startx.log 2>&1
else
  # don't start keychain if logging in from tty
  if [[ -f ~/.ssh/id_dsa ]]; then
    /usr/bin/keychain --quiet --nogui ~/.ssh/id_dsa
  fi
  if [[ -f ~/.ssh/id_rsa ]]; then
    /usr/bin/keychain --quiet --nogui ~/.ssh/id_rsa
  fi
  . ~/.keychain/$HOST-sh
  . ~/.keychain/$HOST-sh-gpg
fi

# vim: ft=zsh
